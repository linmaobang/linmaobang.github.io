<!DOCTYPE html>
<html lang="en" style="height: 100%">
<head>
  <meta charset="utf-8">
</head>
<body style="height: 100%; margin: 0">
  <div id="container" style="height: 100%"></div>

  
  <script type="text/javascript" src="https://registry.npmmirror.com/echarts/5.4.3/files/dist/echarts.min.js"></script>

  <script type="text/javascript">
    var dom = document.getElementById('container');
    var myChart = echarts.init(dom, 'dark', {
      renderer: 'canvas',
      useDirtyRect: false
    });
    var app = {};
    
    var option;

    const colors = ['#FFAE57', '#FF7853', '#EA5151', '#CC3F57', '#9A2555'];
const bgColor = '#2E2733';
const itemStyle = {
  star5: {
    color: colors[0]
  },
  star4: {
    color: colors[1]
  },
  star3: {
    color: colors[2]
  },
  star2: {
    color: colors[3]
  },
  star1: {
    color: colors[4]
  }
};
const data = 
[
  {
    "name": "个人成长",
    'itemStyle': {'color': colors[1]},
    "children": [
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "share your work"
          }
        ]
      },
      {
        "name": "⭐⭐",
        "children": [
          {
            "name": "认知觉醒：开启自我改变的原动力"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "心流"
          }
        ]
      },
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "早起的奇迹"
          }
        ]
      }
    ]
  },
  {
    "name": "治愈",
    "children": [
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "人生借阅室"
          }
        ]
      }
    ]
  },
  {
    "name": "教育",
    'itemStyle': {'color': colors[2]},
    "children": [
      {
        "name": "⭐⭐⭐⭐⭐",
        "children": [
          {
            "name": "我用阅读教育孩子"
          }
        ]
      },
      {
        "name": "⭐⭐",
        "children": [
          {
            "name": "教出乐观的孩子：让孩子受用一生的幸福经典"
          }
        ]
      },
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "家长最关注的100个教育问题"
          }
        ]
      },
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "孩子：挑战"
          }
        ]
      },
      {
        "name": "⭐⭐",
        "children": [
          {
            "name": "在游戏中给孩子美的启蒙"
          }
        ]
      },
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "孩子你慢慢来"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "你当像鸟飞往你的山"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "卡尔·威特的教育"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "亲爱的安德烈"
          }
        ]
      }
    ]
  },
  {
    "name": "小说",
    'itemStyle': {'color': colors[2]},
    "children": [
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "封神演义"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐⭐",
        "children": [
          {
            "name": "命运"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "骆驼祥子"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐⭐",
        "children": [
          {
            "name": "一个叫欧维的男人决定去死"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "不能承受的生命之轻"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "长安的荔枝"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "1984"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐⭐",
        "children": [
          {
            "name": "杀死一只知更鸟"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "鼠疫"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "美丽新世界"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "局外人"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "许三观卖血记"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "老人与海"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "你当像鸟飞往你的山"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐⭐",
        "children": [
          {
            "name": "房思琪的初恋乐园"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "无人生还"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐⭐",
        "children": [
          {
            "name": "三体III"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐⭐",
        "children": [
          {
            "name": "三体II"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "三体I"
          }
        ]
      }
    ]
  },
  {
    "name": "杂文",
    'itemStyle': {'color': colors[2]},
    "children": [
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "皮囊"
          }
        ]
      }
    ]
  },
  {
    "name": "回忆录",
    'itemStyle': {'color': colors[1]},
    "children": [
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "皮囊"
          }
        ]
      }
    ]
  },
  {
    "name": "快乐",
    'itemStyle': {'color': colors[2]},
    "children": [
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "快乐美学：用平凡之物创造非凡快乐的10种方法"
          }
        ]
      }
    ]
  },
  {
    "name": "现实题材",
    'itemStyle': {'color': colors[3]},
    "children": [
      {
        "name": "⭐⭐⭐⭐⭐",
        "children": [
          {
            "name": "命运"
          }
        ]
      }
    ]
  },
  {
    "name": "侦探",
    'itemStyle': {'color': colors[3]},
    "children": [
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "帷幕"
          }
        ]
      },
      {
        "name": "⭐⭐",
        "children": [
          {
            "name": "谋杀启事"
          }
        ]
      },
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "阳光下的罪恶"
          }
        ]
      }
    ]
  },
  {
    "name": "悬疑",
    'itemStyle': {'color': colors[3]},
    "children": [
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "帷幕"
          }
        ]
      },
      {
        "name": "⭐⭐",
        "children": [
          {
            "name": "谋杀启事"
          }
        ]
      },
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "阳光下的罪恶"
          }
        ]
      },
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "底牌"
          }
        ]
      },
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "尼罗河上的惨案"
          }
        ]
      },
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "ABC谋杀案"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐⭐",
        "children": [
          {
            "name": "罗杰疑案"
          }
        ]
      },
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "斯泰尔斯庄园奇案"
          }
        ]
      },
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "宋慈洗冤笔记"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "东方快车谋杀案"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "无人生还"
          }
        ]
      }
    ]
  },
  {
    "name": "励志",
    'itemStyle': {'color': colors[4]},
    "children": [
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "一生的财富：洛克菲勒写给儿子的38封信"
          }
        ]
      }
    ]
  },
  {
    "name": "书信",
    'itemStyle': {'color': colors[4]},
    "children": [
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "一生的财富：洛克菲勒写给儿子的38封信"
          }
        ]
      }
    ]
  },
  {
    "name": "成功学",
    'itemStyle': {'color': colors[2]},
    "children": [
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "一生的财富：洛克菲勒写给儿子的38封信"
          }
        ]
      },
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "纳瓦尔宝典"
          }
        ]
      },
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "思考致富"
          }
        ]
      }
    ]
  },
  {
    "name": "历史",
    'itemStyle': {'color': colors[3]},
    "children": [
      {
        "name": "⭐⭐⭐⭐⭐",
        "children": [
          {
            "name": "南京大屠杀：第二次世界大战中被遗忘的大浩劫"
          }
        ]
      },
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "紫禁城的黄昏"
          }
        ]
      },
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "我的前半生"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "齐如山回忆录：清宫史话"
          }
        ]
      },
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "宫女谈往录：储秀宫里随侍慈禧八年"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐⭐",
        "children": [
          {
            "name": "明朝那些事儿"
          }
        ]
      }
    ]
  },
  {
    "name": "中国历史",
    'itemStyle': {'color': colors[3]},
    "children": [
      {
        "name": "⭐⭐⭐⭐⭐",
        "children": [
          {
            "name": "南京大屠杀：第二次世界大战中被遗忘的大浩劫"
          }
        ]
      },
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "我的前半生"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "齐如山回忆录：清宫史话"
          }
        ]
      },
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "宫女谈往录：储秀宫里随侍慈禧八年"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "中国历代政治得失"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐⭐",
        "children": [
          {
            "name": "明朝那些事儿"
          }
        ]
      }
    ]
  },
  {
    "name": "女性",
    'itemStyle': {'color': colors[4]},
    "children": [
      {
        "name": "⭐⭐⭐⭐⭐",
        "children": [
          {
            "name": "给一个未出生孩子的信"
          }
        ]
      },
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "始于极限 "
          }
        ]
      },
      {
        "name": "⭐⭐⭐",
        "children": [
          {
            "name": "看不见的女性"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "你当像鸟飞往你的山"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐",
        "children": [
          {
            "name": "82年生的金智英"
          }
        ]
      },
      {
        "name": "⭐⭐⭐⭐⭐",
        "children": [
          {
            "name": "房思琪的初恋乐园"
          }
        ]
      }
    ]
  },
  
]
for (let j = 0; j < data.length; ++j) {
  let level1 = data[j].children;
  for (let i = 0; i < level1.length; ++i) {
    let block = level1[i].children;
    let bookScore = [];
    let bookScoreId;
    for (let star = 0; star < block.length; ++star) {
      let style = (function (name) {
        switch (name) {
          case '5☆':
            bookScoreId = 0;
            return itemStyle.star5;
          case '4☆':
            bookScoreId = 1;
            return itemStyle.star4;
          case '3☆':
            bookScoreId = 2;
            return itemStyle.star3;
          case '2☆':
            bookScoreId = 3;
            return itemStyle.star2;
          case '☆':
            bookScoreId = 4;
            return itemStyle.star1;
        }
      })(block[star].name);
      block[star].label = {
        color: style.color,
        downplay: {
          opacity: 0.5
        }
      };
      if (block[star].children) {
        style = {
          opacity: 1,
          color: style.color
        };
        block[star].children.forEach(function (book) {
          book.value = 1;
          book.itemStyle = style;
          book.label = {
            color: style.color
          };
          let value = 1;
          if (bookScoreId === 0 || bookScoreId === 3) {
            value = 5;
          }
          if (bookScore[bookScoreId]) {
            bookScore[bookScoreId].value += value;
          } else {
            bookScore[bookScoreId] = {
              color: colors[bookScoreId],
              value: value
            };
          }
        });
      }
    }
    level1[i].itemStyle = {
      color: data[j].itemStyle.color
    };
  }
}
option = {
  backgroundColor: bgColor,
  color: colors,
  series: [
    {
      type: 'sunburst',
      center: ['50%', '48%'],
      data: data,
      sort: function (a, b) {
        if (a.depth === 1) {
          return b.getValue() - a.getValue();
        } else {
          return a.dataIndex - b.dataIndex;
        }
      },
      label: {
        rotate: 'radial',
        color: bgColor
      },
      itemStyle: {
        borderColor: bgColor,
        borderWidth: 2
      },
      levels: [
        {},
        {
          r0: 0,
          r: 85,
          label: {
            rotate: 0
          }
        },
        {
          r0: 85,
          r: 185
        },
        {
          r0: 185,
          r: 215,
          itemStyle: {
            shadowBlur: 2,
            shadowColor: colors[2],
            color: 'transparent'
          },
          label: {
            rotate: 'tangential',
            fontSize: 10,
            color: colors[0]
          }
        },
        {
          r0: 215,
          r: 220,
          itemStyle: {
            shadowBlur: 80,
            shadowColor: colors[0]
          },
          label: {
            position: 'outside',
            textShadowBlur: 5,
            textShadowColor: '#333'
          },
          downplay: {
            label: {
              opacity: 0.5
            }
          }
        }
      ]
    }
  ]
};

    if (option && typeof option === 'object') {
      myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
  </script>
</body>
</html>